<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{shared/fragments/head :: head('Product Detail - Grocery Store')}"></head>
    <body>
        <!-- Header -->
        <header th:replace="~{shared/shared/fragments/header :: header}"></header>
        
        <!-- MAIN -->
        <main class="product-page" th:data-product-id="${product.id}">
            <div class="container">
                <!-- Search bar -->
                <div class="product-container">
                    <div class="search-bar d-none d-md-flex">
                        <input type="text" name="" id="" placeholder="Search for item" class="search-bar__input" />
                        <button class="search-bar__submit">
                            <img th:src="@{/assets/icon/search.svg}" alt="" class="search-bar__icon icon" />
                        </button>
                    </div>
                </div>

                <!-- Breadcrumbs -->
                <div class="product-container">
                    <!-- Breadcrumbs -->
                    <ul class="breadcrumbs">
                        <li>
                            <a href="#!" class="breadcrumbs__link">
                                Departments
                                <img th:src="@{/assets/icon/arrow-right.svg}" alt="" />
                            </a>
                        </li>
                        <li>
                            <a href="#!" class="breadcrumbs__link">
                                Coffee
                                <img th:src="@{/assets/icon/arrow-right.svg}" alt="" />
                            </a>
                        </li>
                        <li>
                            <a href="#!" class="breadcrumbs__link">
                                Coffee Beans
                                <img th:src="@{/assets/icon/arrow-right.svg}" alt="" />
                            </a>
                        </li>
                        <li>
                            <a href="#!" class="breadcrumbs__link breadcrumbs__link--current">LavAzza</a>
                        </li>
                    </ul>
                </div>

                <!-- Product info -->
                <div class="product-container prod-info-content">
                    <div class="row">
                        <div class="col-5 col-xl-6 col-lg-12">
                            <div class="prod-preview">
                                <div class="prod-preview__list">
                                    <div class="prod-preview__item">
                                        <img th:src="@{/assets/img/product/item-1.png}" alt="" class="prod-preview__img" />
                                    </div>
                                    <div class="prod-preview__item">
                                        <img th:src="@{/assets/img/product/item-2.png}" alt="" class="prod-preview__img" />
                                    </div>
                                    <div class="prod-preview__item">
                                        <img th:src="@{/assets/img/product/item-3.png}" alt="" class="prod-preview__img" />
                                    </div>
                                    <div class="prod-preview__item">
                                        <img th:src="@{/assets/img/product/item-4.png}" alt="" class="prod-preview__img" />
                                    </div>
                                </div>
                                <div class="prod-preview__thumbs">
                                    <img
                                        th:src="@{/assets/img/product/item-1.png}"
                                        alt=""
                                        class="prod-preview__thumb-img prod-preview__thumb-img--current" />
                                    <img th:src="@{/assets/img/product/item-2.png}" alt="" class="prod-preview__thumb-img" />
                                    <img th:src="@{/assets/img/product/item-3.png}" alt="" class="prod-preview__thumb-img" />
                                    <img th:src="@{/assets/img/product/item-4.png}" alt="" class="prod-preview__thumb-img" />
                                </div>
                            </div>
                        </div>
                        <div class="col-7 col-xl-6 col-lg-12">
                            <form action="" class="form">
                                <section class="prod-info">
                                    <h1 class="prod-info__heading" th:text="${product.name}">
                                        Coffee Beans - Espresso Arabica and Robusta Beans
                                    </h1>
                                    <div class="row">
                                        <div class="col-5 col-xxl-6 col-xl-12">
                                            <div class="prod-prop">
                                                <img th:src="@{/assets/icon/star.svg}" alt="" class="prod-prop__icon" />
                                                <h4 class="prod-prop__title">(<span id="avgRating">3.5</span>) <span id="reviewCount">1100</span> reviews</h4>
                                            </div>
                                            <label for="" class="form__label prod-info__label">Weight/Size</label>
                                            <div class="filter__form-group">
                                                <div class="form__select-wrap">
                                                    <div class="form__select">
                                                        <select class="weight-size">
                                                            <option value="200g">200g</option>
                                                            <option value="300g">300g</option>
                                                            <option value="400g">400g</option>
                                                            <option value="500g" selected>500g</option>
                                                            <option value="600g">600g</option>
                                                            <option value="700g">700g</option>
                                                            <option value="800g">800g</option>
                                                            <option value="900g">900g</option>
                                                            <option value="1000g">1000g</option>
                                                        </select>
                                                    </div>
                                                    <div class="form__select">
                                                        <select class="weight-size">
                                                            <option value="gram">Gram</option>
                                                            <option value="pao">Pao</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="filter__form-group">
                                                <div class="form__tags">
                                                    <button
                                                        type="button"
                                                        class="form__tag prod-info__tag btn1"
                                                        onclick="toggleSelected1(this)">
                                                        Small
                                                    </button>
                                                    <button
                                                        type="button"
                                                        class="form__tag prod-info__tag btn1"
                                                        onclick="toggleSelected1(this)">
                                                        Medium
                                                    </button>
                                                    <button
                                                        type="button"
                                                        class="form__tag prod-info__tag btn1"
                                                        onclick="toggleSelected1(this)">
                                                        Large
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-7 col-xxl-6 col-xl-12">
                                            <div class="prod-props">
                                                <div class="prod-prop">
                                                    <img
                                                        th:src="@{/assets/icon/document.svg}"
                                                        alt=""
                                                        class="prod-prop__icon icon" />
                                                    <h4 class="prod-prop__title">Compare</h4>
                                                </div>
                                                <div class="prod-prop">
                                                    <img
                                                        th:src="@{/assets/icon/buy.svg}"
                                                        alt=""
                                                        class="prod-prop__icon icon" />
                                                    <div>
                                                        <h4 class="prod-prop__title">Delivery</h4>
                                                        <p class="prod-prop__desc">From $6 for 1-3 days</p>
                                                    </div>
                                                </div>
                                                <div class="prod-prop">
                                                    <img
                                                        th:src="@{/assets/icon/bag.svg}"
                                                        alt=""
                                                        class="prod-prop__icon icon" />
                                                    <div>
                                                        <h4 class="prod-prop__title">Pickup</h4>
                                                        <p class="prod-prop__desc">Out of 2 store, today</p>
                                                    </div>
                                                </div>
                                                <div class="prod-info__card">
                                                    <div class="prod-info__row">
                                                        <span class="prod-info__price" th:text="'$' + ${product.price}">$500.00</span>
                                                        <span class="prod-info__tax">10%</span>
                                                    </div>
                                                    <p class="prod-info__total-price" th:text="'$' + ${product.price * 1.1}">$540.00</p>
                                                    <div class="prod-info__row">
                                                        <button class="btn btn--primary prod-info__add-to-cart">
                                                            Add to cart
                                                        </button>
                                                        <button class="like-btn prod-info__like-btn" id="wishlistBtn" onclick="toggleWishlist()">
                                                            <img
                                                                th:src="@{/assets/icon/heart.svg}"
                                                                alt=""
                                                                class="like-btn__icon icon" />
                                                            <img
                                                                th:src="@{/assets/icon/heart-red.svg}"
                                                                alt=""
                                                                class="like-btn__icon--liked" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Product content -->
                <div class="product-container">
                    <div class="prod-tab js-tabs">
                        <ul class="prod-tab__list">
                            <li class="prod-tab__item prod-tab__item--current">Description</li>
                            <li class="prod-tab__item">Review (1100)</li>
                            <li class="prod-tab__item">Similar</li>
                        </ul>
                        <div class="prod-tab__contents">
                            <!-- description content -->
                            <div class="prod-tab__content prod-tab__content--current">
                                <div class="row">
                                    <div class="col-8 col-xl-10 col-lg-12">
                                        <div class="text-content prod-tab__text-content">
                                            <h2>Lorem ipsum dolor sit amet.</h2>
                                            <p>
                                                Lorem ipsum dolor sit amet
                                                <a href="#!">consectetur</a> adipisicing elit. Aliquid, cupiditate.
                                                Modi, quidem, ullam sint dolorum recusandae voluptates dignissimos
                                                similique animi assumenda <a href="#!">praesentium</a> et! Illum dolorem
                                                est rem voluptas nam! Voluptatem.
                                            </p>
                                            <h3>Lorem ipsum dolor sit amet.</h3>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                            <p>
                                                <img th:src="@{/assets/img/product/item-1.png}" alt="" />
                                                <em>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</em>
                                            </p>
                                            <blockquote>
                                                <p>
                                                    Lorem ipsum dolor sit amet <em>consectetur</em>
                                                    <u>adipisicing</u> elit. Aliquid, cupiditate. Modi, quidem, ullam
                                                    sint dolorum recusandae voluptates dignissimos similique animi
                                                    assumenda praesentium et! Illum dolorem est rem voluptas nam!
                                                    Voluptatem.
                                                </p>
                                            </blockquote>
                                            <h3>Lorem ipsum dolor sit amet.</h3>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>

                                            <hr />

                                            <h2>Lorem ipsum dolor sit amet.</h2>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                            <p>
                                                <img th:src="@{/assets/img/product/item-1.png}" alt="" />
                                                <em>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</em>
                                            </p>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>

                                            <hr />

                                            <h2>Lorem ipsum dolor sit amet.</h2>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                            <p>
                                                <img th:src="@{/assets/img/product/item-1.png}" alt="" />
                                                <em>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</em>
                                            </p>
                                            <p>
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid,
                                                cupiditate. Modi, quidem, ullam sint dolorum recusandae voluptates
                                                dignissimos similique animi assumenda praesentium et! Illum dolorem est
                                                rem voluptas nam! Voluptatem.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- review content -->
                            <div class="prod-tab__content">
                                <div class="prod-content">
                                    <h2 class="prod-content__heading">What our customers are saying</h2>
                                    
                                    <!-- Review Form -->
                                    <div class="review-form-container" style="margin-bottom: 30px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px;">
                                        <h3 style="margin-bottom: 15px;">Leave a Review</h3>
                                        <form id="reviewForm">
                                            <!-- Rating Stars -->
                                            <div style="margin-bottom: 15px;">
                                                <label style="display: block; margin-bottom: 8px;">Rating:</label>
                                                <div id="ratingStars" style="display: flex; gap: 10px;">
                                                    <span class="rating-star" data-rating="1" style="cursor: pointer; font-size: 24px;">☆</span>
                                                    <span class="rating-star" data-rating="2" style="cursor: pointer; font-size: 24px;">☆</span>
                                                    <span class="rating-star" data-rating="3" style="cursor: pointer; font-size: 24px;">☆</span>
                                                    <span class="rating-star" data-rating="4" style="cursor: pointer; font-size: 24px;">☆</span>
                                                    <span class="rating-star" data-rating="5" style="cursor: pointer; font-size: 24px;">☆</span>
                                                </div>
                                                <input type="hidden" id="selectedRating" value="0" />
                                            </div>
                                            
                                            <!-- Title Input -->
                                            <div style="margin-bottom: 15px;">
                                                <label for="reviewTitle" style="display: block; margin-bottom: 8px;">Title:</label>
                                                <input type="text" id="reviewTitle" placeholder="Enter review title" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;" />
                                            </div>
                                            
                                            <!-- Comment Textarea -->
                                            <div style="margin-bottom: 15px;">
                                                <label for="reviewComment" style="display: block; margin-bottom: 8px;">Comment:</label>
                                                <textarea id="reviewComment" placeholder="Enter your review comment" rows="5" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
                                            </div>
                                            
                                            <!-- Submit Button -->
                                            <button type="button" class="btn btn--primary" onclick="submitReview()">Submit Review</button>
                                        </form>
                                    </div>
                                    
                                    <div class="row row-cols-3 gx-lg-2 row-cols-md-1 gy-md-3" id="reviewsList">
                                        <!-- Review card 1 -->
                                        <div class="col">
                                            <div class="review-card">
                                                <div class="review-card__content">
                                                    <img
                                                        th:src="@{/assets/img/avatar/avatar-1.png}"
                                                        alt=""
                                                        class="review-card__avatar" />
                                                    <div class="review-card__info">
                                                        <h4 class="review-card__title">Jakir Hussen</h4>
                                                        <p class="review-card__desc">
                                                            Great product, I love this Coffee Beans
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="review-card__rating">
                                                    <div class="review-card__star-list">
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/half-star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/blank-star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                    </div>
                                                    <span class="review-card__rating-title">( 3.5 ) Review</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Review card 2 -->
                                        <div class="col">
                                            <div class="review-card">
                                                <div class="review-card__content">
                                                    <img
                                                        th:src="@{/assets/img/avatar/avatar-2.png}"
                                                        alt=""
                                                        class="review-card__avatar" />
                                                    <div class="review-card__info">
                                                        <h4 class="review-card__title">Jubed Ahmed</h4>
                                                        <p class="review-card__desc">
                                                            Awesome Coffee, I love this Coffee Beans
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="review-card__rating">
                                                    <div class="review-card__star-list">
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/half-star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                    </div>
                                                    <span class="review-card__rating-title">( 4.5 ) Review</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Review card 3 -->
                                        <div class="col">
                                            <div class="review-card">
                                                <div class="review-card__content">
                                                    <img
                                                        th:src="@{/assets/img/avatar/avatar-3.png}"
                                                        alt=""
                                                        class="review-card__avatar" />
                                                    <div class="review-card__info">
                                                        <h4 class="review-card__title">Delwar Hussain</h4>
                                                        <p class="review-card__desc">
                                                            Great product, I like this Coffee Beans
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="review-card__rating">
                                                    <div class="review-card__star-list">
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                        <img
                                                            th:src="@{/assets/icon/star.svg}"
                                                            alt=""
                                                            class="review-card__star" />
                                                    </div>
                                                    <span class="review-card__rating-title">( 4.0 ) Review</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- similar content -->
                            <div class="prod-tab__content">
                                <div class="prod-content">
                                    <h2 class="prod-content__heading">Similar items you might like</h2>
                                    <div
                                        class="row row-cols-6 row-cols-xl-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-2">
                                        <!-- product item 1 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-1.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Coffee Beans - Espresso Arabica and Robusta Beans</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$47.00</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">4.3</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 2 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-2.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Lavazza Coffee Blends - Try the Italian Espresso</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$53.00</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">3.4</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 3 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-3.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn like-btn__liked product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Lavazza - Caffè Espresso Black Tin - Ground coffee</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">welikecoffee</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$99.99</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">5.0</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 4 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-4.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Qualità Oro Mountain Grown - Espresso Coffee Beans</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$38.65</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">4.4</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 5 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-5.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn like-btn__liked product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Coffee Beans - Espresso Arabica and Robusta Beans</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$47.00</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">4.3</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 6 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-6.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Lavazza Coffee Blends - Try the Italian Espresso</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$53.00</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">3.4</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 7 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-7.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Lavazza - Caffè Espresso Black Tin - Ground coffee</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">welikecoffee</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$99.99</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">5.0</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 8 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-8.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Qualità Oro Mountain Grown - Espresso Coffee Beans</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$38.65</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">4.4</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 9 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-2.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn like-btn__liked product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Coffee Beans - Espresso Arabica and Robusta Beans</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$47.00</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">4.3</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 10 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-1.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Lavazza Coffee Blends - Try the Italian Espresso</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$53.00</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">3.4</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 11 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-4.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Lavazza - Caffè Espresso Black Tin - Ground coffee</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">welikecoffee</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$99.99</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">5.0</span>
                                                </div>
                                            </article>
                                        </div>

                                        <!-- product item 12 -->
                                        <div class="col">
                                            <article class="product-card">
                                                <div class="product-card__img-wrap">
                                                    <a th:href="@{/product-detail}">
                                                        <img
                                                            th:src="@{/assets/img/product/item-3.png}"
                                                            alt=""
                                                            class="product-card__thumb" />
                                                    </a>
                                                    <button class="like-btn product-card__like-btn">
                                                        <img
                                                            th:src="@{/assets/icon/heart.svg}"
                                                            alt=""
                                                            class="like-btn__icon icon" />
                                                        <img
                                                            th:src="@{/assets/icon/heart-red.svg}"
                                                            alt=""
                                                            class="like-btn__icon--liked" />
                                                    </button>
                                                </div>
                                                <h3 class="product-card__title">
                                                    <a th:href="@{/product-detail}"
                                                        >Qualità Oro Mountain Grown - Espresso Coffee Beans</a
                                                    >
                                                </h3>
                                                <p class="product-card__brand">Lavazza</p>
                                                <div class="product-card__row">
                                                    <span class="product-card__price">$38.65</span>
                                                    <img
                                                        th:src="@{/assets/icon/star.svg}"
                                                        alt=""
                                                        class="product-card__star" />
                                                    <span class="product-card__score">4.4</span>
                                                </div>
                                            </article>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer th:replace="~{shared/fragments/footer :: footer}"></footer>
        
        <!-- API Service Scripts -->
        <script th:src="@{/assets/js/reviews-api.js}"></script>
        <script th:src="@{/assets/js/wishlist-api.js}"></script>
        <script th:src="@{/assets/js/cart-api.js}"></script>
        
        <!-- Product Detail Scripts -->
        <script>
            // Get product ID from data attribute
            const productId = document.querySelector('[th\\:data-product-id]')?.getAttribute('data-product-id') || 
                             document.querySelector('[data-product-id]')?.getAttribute('data-product-id');

            // Load reviews on page load
            document.addEventListener('DOMContentLoaded', function() {
                loadReviews();
                setupRatingStars();
                updateWishlistButton();
            });

            // Load reviews from API
            function loadReviews() {
                if (!productId) return;
                
                fetch(`/api/reviews/product/${productId}`)
                    .then(response => response.json())
                    .then(data => {
                        const reviewsList = document.getElementById('reviewsList');
                        reviewsList.innerHTML = '';
                        
                        if (data && data.length > 0) {
                            // Update average rating and review count
                            const avgRating = (data.reduce((sum, r) => sum + r.rating, 0) / data.length).toFixed(1);
                            const reviewCount = data.length;
                            document.getElementById('avgRating').textContent = avgRating;
                            document.getElementById('reviewCount').textContent = reviewCount;
                            
                            // Display reviews
                            data.forEach(review => {
                                const reviewCard = createReviewCard(review);
                                reviewsList.appendChild(reviewCard);
                            });
                        }
                    })
                    .catch(error => console.error('Error loading reviews:', error));
            }

            // Create review card element
            function createReviewCard(review) {
                const col = document.createElement('div');
                col.className = 'col';
                
                const stars = '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating);
                
                col.innerHTML = `
                    <div class="review-card">
                        <div class="review-card__content">
                            <img src="${review.userAvatar || '/assets/img/avatar/avatar-1.png'}" alt="" class="review-card__avatar" />
                            <div class="review-card__info">
                                <h4 class="review-card__title">${review.userName}</h4>
                                <p class="review-card__desc">${review.title}</p>
                            </div>
                        </div>
                        <div class="review-card__rating">
                            <div class="review-card__star-list">
                                ${stars}
                            </div>
                            <span class="review-card__rating-title">( ${review.rating} ) Review</span>
                        </div>
                    </div>
                `;
                
                return col;
            }

            // Setup rating stars click handlers
            function setupRatingStars() {
                const stars = document.querySelectorAll('.rating-star');
                stars.forEach(star => {
                    star.addEventListener('click', function() {
                        const rating = this.getAttribute('data-rating');
                        document.getElementById('selectedRating').value = rating;
                        
                        // Update star display
                        stars.forEach(s => {
                            if (s.getAttribute('data-rating') <= rating) {
                                s.textContent = '★';
                            } else {
                                s.textContent = '☆';
                            }
                        });
                    });
                });
            }

            // Submit review
            function submitReview() {
                const rating = document.getElementById('selectedRating').value;
                const title = document.getElementById('reviewTitle').value;
                const comment = document.getElementById('reviewComment').value;
                
                if (!rating || !title || !comment) {
                    alert('Please fill in all fields');
                    return;
                }
                
                if (!productId) {
                    alert('Product ID not found');
                    return;
                }
                
                const reviewData = {
                    productId: productId,
                    rating: parseInt(rating),
                    title: title,
                    comment: comment
                };
                
                fetch('/api/reviews', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('token')
                    },
                    body: JSON.stringify(reviewData)
                })
                .then(response => response.json())
                .then(data => {
                    alert('Review submitted successfully!');
                    document.getElementById('reviewForm').reset();
                    document.getElementById('selectedRating').value = 0;
                    document.querySelectorAll('.rating-star').forEach(s => s.textContent = '☆');
                    loadReviews();
                })
                .catch(error => {
                    console.error('Error submitting review:', error);
                    alert('Error submitting review');
                });
            }

            // Toggle wishlist
            function toggleWishlist() {
                if (!productId) return;
                
                const wishlistBtn = document.getElementById('wishlistBtn');
                const isWishlisted = wishlistBtn.classList.contains('like-btn__liked');
                
                const endpoint = isWishlisted ? 
                    `/api/wishlist/${productId}` : 
                    `/api/wishlist`;
                
                const method = isWishlisted ? 'DELETE' : 'POST';
                
                const body = isWishlisted ? null : JSON.stringify({ productId: productId });
                
                fetch(endpoint, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('token')
                    },
                    body: body
                })
                .then(response => response.json())
                .then(data => {
                    updateWishlistButton();
                })
                .catch(error => console.error('Error toggling wishlist:', error));
            }

            // Update wishlist button state
            function updateWishlistButton() {
                if (!productId) return;
                
                fetch(`/api/wishlist/check/${productId}`, {
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('token')
                    }
                })
                .then(response => response.json())
                .then(data => {
                    const wishlistBtn = document.getElementById('wishlistBtn');
                    if (data.isWishlisted) {
                        wishlistBtn.classList.add('like-btn__liked');
                    } else {
                        wishlistBtn.classList.remove('like-btn__liked');
                    }
                })
                .catch(error => console.error('Error checking wishlist:', error));
            }
        </script>
    </body>
</html>
